<%!
    from dp.server.main import isRun
%>
<%inherit file="base.html"/>
<h2>Client List</h2>
% if msg:
	<div class="alert alert-info">
		<button type="button" class="close" data-dismiss="alert">Ã—</button>
		${msg}
	</div>
% endif
<table class="table table-striped table-bordered table-condensed">
	<thead>
		<tr>
			<th>Client Ip</th>
			<th>Version</th>
			<th>Status</th>
			<th>Last Conneted</th>
			<th>Last Patched</th>
			<th>Operations</th>
		<tr>
	</thead>
	<tbody>
		% for key,value in clientDict.iteritems():
		<tr>
			<td>${key}</td>
			<td>${value['version']}</td>
			<td>
			% if isRun(key):
				<span class="label label-success">
			% else:
				<span class="label label-important">
			% endif
				${value['status'].name}
				</span>
			</td>
			<td>${value['lastConnected']}</td>
			<td>${value['lastPatched']}</td>
			<td>
				% if  isRun(key):
				<form class="form-inline" style="margin-bottom:2px;" method="POST" action="/clientOp">
				<input type="hidden" name="ip" value="${key}"></input>
				<input class="btn" type="submit" name="op" value="Restart"></input>
				<input class="btn" type="submit" name="op" value="Patch"></input>
				</form>
				% endif
			</td>
		</tr>
		% endfor
	</tbody>
</table>
