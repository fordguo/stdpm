<%!
    from dp.server.main import isRun
%>
<%inherit file="procBase.html"/>
<h2>Process List</h2>
<table class="table table-striped table-bordered table-condensed">
	<thead>
		<tr>
			<th>Group</th>
			<th>Name</th>
			<th>Status</th>
			<th>Last Updated</th>
			% if isRun(currentIp):
			<th>Operations</th>
			% endif
		<tr>
	</thead>
	<tbody>
		% for key,value in procDict.iteritems():
			% for i,procRow in enumerate(value):
		<tr>
			% if i==0 :
				<td rowspan="${len(value)}">${key}</td>
			% endif
			<td><a href="/clientProcInfo?name=${procRow[3]}">${procRow[0]}</a></td>
			<td>
			% if isRun(procRow[3]):
				<span class="label label-success">
			% else:
				<span class="label label-important">
			% endif
				${procRow[1].name}
				</span>
			</td>
			<td>${procRow[2]}</td>
			% if isRun(currentIp):
			<td>
				% if not isRun(procRow[3]):
				<a href="/clientProcOp?name=${procRow[3]}&op=START">Start<a/>&nbsp;
				% else:
				<a href="/clientProcOp?name=${procRow[3]}&op=STOP">Stop<a/>&nbsp;
				% endif
				<a href="/clientProcOp?name=${procRow[3]}&op=RESTART">Restart<a/>
			</td>
			% endif
		</tr>
			% endfor
		% endfor
	</tbody>
</table>
